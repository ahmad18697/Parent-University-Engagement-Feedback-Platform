{% extends "base.html" %}
{% block content %}
<section class="card">
  <h2><i class="fas fa-comment-dots"></i> Submit Feedback</h2>
  <form method="post" action="/submit" id="feedbackForm">
    <div class="grid">
      <label>
        <i class="fas fa-user"></i> Parent Name
        <input type="text" name="parent_name" required minlength="2" maxlength="100" 
               placeholder="Enter your full name">
      </label>
      <label>
        <i class="fas fa-envelope"></i> Parent Email
        <input type="email" name="parent_email" required 
               placeholder="your.email@example.com">
      </label>
      <label>
        <i class="fas fa-id-card"></i> Student ID (Optional)
        <input type="text" name="student_id" 
               placeholder="Student identification number">
      </label>
      <label>
        <i class="fas fa-comments"></i> Channel
        <select name="channel">
          <option value="web" selected>Web Form</option>
          <option value="phone">Phone Call</option>
          <option value="email">Email</option>
          <option value="in-person">In-person Meeting</option>
        </select>
      </label>
      <label class="full-width">
        <i class="fas fa-message"></i> Message
        <textarea name="message" rows="6" required minlength="5" 
                  placeholder="Please share your feedback, concerns, or suggestions. We're here to help!"></textarea>
      </label>
    </div>
    <button type="submit">
      <i class="fas fa-paper-plane"></i> Submit Feedback
    </button>
  </form>
</section>

{% if result %}
<section class="card result-card">
  <h3><i class="fas fa-check-circle"></i> Feedback Submitted Successfully!</h3>
  <div class="result-grid">
    <div class="result-item">
      <strong>Feedback ID</strong>
      <span>#{{ result.id }}</span>
    </div>
    <div class="result-item">
      <strong>Sentiment</strong>
      <span class="sentiment-{{ result.sentiment }}">
        <i class="fas fa-{% if result.sentiment == 'positive' %}smile{% elif result.sentiment == 'negative' %}frown{% else %}meh{% endif %}"></i>
        {{ result.sentiment|title }}
      </span>
    </div>
    <div class="result-item">
      <strong>Category</strong>
      <span>{{ result.category }}</span>
    </div>
    <div class="result-item">
      <strong>Priority</strong>
      <span class="priority-{{ result.priority }}">{{ result.priority|title }}</span>
    </div>
    <div class="result-item">
      <strong>Department</strong>
      <span>{{ result.department }}</span>
    </div>
    <div class="result-item">
      <strong>Status</strong>
      <span class="status-badge status-{{ result.status|lower }}">{{ result.status }}</span>
    </div>
  </div>
  <p style="margin-top: 1rem; padding: 1rem; background: #f1f5f9; border-radius: var(--radius);">
    <i class="fas fa-info-circle"></i> Your feedback has been routed to the appropriate department. 
  </p>
</section>
{% endif %}
{% endblock %}